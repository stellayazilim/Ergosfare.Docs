---
title: Pluginler
description: Ergosfareâ€™de pluginlere giriÅŸ ve Ã¶zel bir plugin oluÅŸturma.
---

## Plugin Nedir?

Ergosfareâ€™de pluginler, **baÄŸÄ±msÄ±z modÃ¼ller** olarak eklenebilen, Ã§ekirdek sistemi deÄŸiÅŸtirmeden yeni iÅŸlevsellik saÄŸlayan bileÅŸenlerdir. Bu sayede esneklik ve geniÅŸletilebilirlik artar.  

AslÄ±nda Ergosfareâ€™deki her modÃ¼l (**Command**, **Query**, **Event**) Ã§ekirdek sistemi geniÅŸleten bir plugin olarak dÃ¼ÅŸÃ¼nÃ¼lebilir:

{% prose %}
* **Command Module** â†’ Komut iÅŸleme yetenekleri ekler.  
* **Query Module** â†’ Sorgulama ve veri alma iÅŸlevleri saÄŸlar.  
* **Event Module** â†’ Olay yayÄ±nlama ve tepkisel event iÅŸleme Ã¶zelliÄŸi ekler.  
{% /prose %}

> âš¡ Ergosfareâ€™deki her modÃ¼l (Command, Query, Event) aslÄ±nda Ã§ekirdeÄŸin Ã¼zerine inÅŸa edilmiÅŸ **baÄŸÄ±msÄ±z bir plugin** gibidir. GeliÅŸtiriciler ihtiyaÃ§ duyduklarÄ± modÃ¼lleri yÃ¼kleyerek sistemi geniÅŸletebilir.  


### Temel Noktalar

{% prose %}
* Pluginler, Ã§ekirdeÄŸe dokunmadan sistemi geniÅŸleten **baÄŸÄ±msÄ±z modÃ¼llerdir**.
* Ã‡ekirdek modÃ¼ller (Command, Query, Event) zaten plugin Ã¶rnekleridir.
* Pluginler servis, endpoint, handler veya interceptor kaydedebilir.
* UygulamanÄ±zÄ± daha esnek ve modÃ¼ler hale getirirler.
{% /prose %}


## Neden Plugin KullanmalÄ±yÄ±m?

{% prose %}
* Ã‡ekirdek sistemi deÄŸiÅŸtirmeden Ergosfareâ€™e yeni iÅŸlevsellik ekleyin.
* Yeni endpoint, command, query veya event handlerâ€™larÄ± modÃ¼ler bir ÅŸekilde ekleyin.
* BakÄ±mÄ± kolaylaÅŸtÄ±rÄ±r ve yeniden kullanÄ±labilirliÄŸi artÄ±rÄ±r.
* Ä°steÄŸe baÄŸlÄ± Ã¶zelliklerin dinamik olarak yÃ¼klenmesini saÄŸlar.
{% /prose %}



## Ã–zel Plugin OluÅŸturma

Ergosfareâ€™de Ã¶zel bir plugin oluÅŸturmak iÃ§in `IModule` arayÃ¼zÃ¼nÃ¼ (namespace: `Ergosfare.Core.Extensions.MicrosoftDependencyInjection`) uygulamanÄ±z gerekir. Pluginler, Ergosfare altyapÄ±sÄ±nda neredeyse her ÅŸeyi yapabilir.

{% steps %}
1. ### AdÄ±m 1: Plugin iÃ§in bir servis oluÅŸturun

    Her plugin genellikle bir veya birden fazla **service** iÃ§erir. Bu servisler, pluginin sisteme kattÄ±ÄŸÄ± iÅŸlevselliÄŸi temsil eder.  

    Bu Ã¶rnekte servis, Ergosfare pipelineâ€™Ä±na abone olur ve her yeni pipeline event baÅŸladÄ±ÄŸÄ±nda bir mesaj yazar. BÃ¶ylece pluginin Ã§ekirdek mantÄ±ÄŸa dokunmadan sistem olaylarÄ±nÄ± nasÄ±l *izleyebildiÄŸini* gÃ¶stermiÅŸ oluruz.

    ```csharp
    using Ergosfare.Core.Events;

    namespace Ergosfare.Examples.PluginExample;

    internal class ExampleService : IDisposable
    {
        private readonly IDisposable _subscription;

        public ExampleService()
        {
            _subscription = PipelineEvent.Subscribe<BeginPipelineEvent>(OnPipelineEvent);
        }

        private void OnPipelineEvent(PipelineEvent evt)
        {
            Console.WriteLine($"[ExamplePlugin] Merhaba DÃ¼nya! Event alÄ±ndÄ±: {evt.GetType().Name}");
        }

        public void Dispose()
        {
            _subscription.Dispose();
        }
    }
    ```

    > â„¹`Ergosfare.Core.Events` altÄ±ndaki APIâ€™ler **altyapÄ± seviyesinde APIâ€™lerdir**. **Event Module**â€™den (domain eventleri iÃ§in kullanÄ±lan) farklÄ±dÄ±r. Bu dÃ¼ÅŸÃ¼k seviyeli eventler normalde handler gibi uygulama servislerine aÃ§Ä±lmamalÄ±dÄ±r.  

    > ğŸ“š Ergosfareâ€™nin *kalpatÄ±ÅŸlarÄ±nÄ±* ve altyapÄ± sinyallerini dinlemek iÃ§in ÅŸunlara gÃ¶z atÄ±n: [IEventHub](), [IHasProxyEvents](), [PipelineEvents]().

2. ### AdÄ±m 2: Servisi bir plugin olarak paketleyin

    Åimdi servisi **plugin modÃ¼lÃ¼** iÃ§ine paketlememiz gerekiyor. `ExampleService`â€™i doÄŸrudan DI containerâ€™a kaydetmek yerine, onu kaydedip kaydetmeye karar veren bir plugin sÄ±nÄ±fÄ± oluÅŸturuyoruz.  

    Bu yaklaÅŸÄ±m servisi **isteÄŸe baÄŸlÄ±, yapÄ±landÄ±rÄ±labilir ve concurrency-safe** hale getirir.

    ```csharp
    using Ergosfare.Core.Extensions.MicrosoftDependencyInjection;
    using Microsoft.Extensions.DependencyInjection;

    namespace Ergosfare.Examples.PluginExample;

    internal class ExamplePlugin : IModule
    {
        private readonly Action<ExamplePluginBuilder> _builderAction;

        public ExamplePlugin(Action<ExamplePluginBuilder> builderAction)
        {
            _builderAction = builderAction;
        }

        public void Build(IModuleConfiguration configuration)
        {
            var builder = new ExamplePluginBuilder();
            _builderAction(builder);

            if (builder.EnableHelloWorld)
            {
                configuration.Services.AddSingleton<ExampleService>();
            }
        }
    }
    ```

    #### Neden ExampleServiceâ€™i plugin olarak sarmalÄ±yoruz?

    ExamplePlugin, Ergosfareâ€™nin plugin tabanlÄ± mimarisinin concurrency ve konfigurasyon yÃ¶netimini nasÄ±l gÃ¼venli yaptÄ±ÄŸÄ±nÄ± gÃ¶steriyor:

    {% prose %}
    * **Concurrency-safe konfigurasyon** â€” Birden fazla modÃ¼l aynÄ± anda servis kaydetmeye Ã§alÄ±ÅŸsa bile Ã§akÄ±ÅŸma yaÅŸanmaz.
    * **Cross-plugin konfigurasyon** â€” Bir plugin baÅŸka birini konfigure edebilir; Ergosfare tutarlÄ± sÄ±ralama saÄŸlayarak race conditionâ€™larÄ± engeller.
    * **Opsiyonel servisler** â€” `ExampleService`, yalnÄ±zca `ExamplePluginBuilder` ile etkinleÅŸtirilirse yÃ¼klenir.
    * **Temiz ayrÄ±m** â€” Pluginler isteÄŸe baÄŸlÄ± Ã¶zellikleri Ã§ekirdekten ayrÄ± tutar, coupling azaltÄ±r.
    * **BirleÅŸik geniÅŸletilebilirlik** â€” Command, Query ve Event gibi bÃ¼yÃ¼k modÃ¼ller de aslÄ±nda plugin olduÄŸu iÃ§in Ã¶zel pluginler doÄŸal ÅŸekilde ekosisteme uyar.
    * **DaÄŸÄ±tÄ±m** â€” Ã–zel pluginler NuGet paketi olarak paylaÅŸÄ±labilir. DoÄŸru ÅŸekilde inÅŸa edilirse Ergosfare onlarÄ± otomatik olarak keÅŸfeder ve yÃ¼kler.  
    {% /prose %}

3. ### AdÄ±m 3: Plugin iÃ§in bir builder oluÅŸturun

    Pluginler genellikle **yapÄ±landÄ±rma yÃ¼zeyi** sunar, bÃ¶ylece geliÅŸtiriciler davranÄ±ÅŸÄ±nÄ± kontrol edebilir.  

    Bunun iÃ§in genelde **builder pattern** kullanÄ±lÄ±r. Builder, toggle, opsiyon veya geliÅŸmiÅŸ ayarlar sunabilir; pluginin kendisi ise temiz kalÄ±r.

    ```csharp
    public class ExamplePluginBuilder
    {
        internal bool EnableHelloWorld { get; private set; }

        public ExamplePluginBuilder SetupPlugin()
        {
            EnableHelloWorld = true;
            return this;
        }
    }
    ```

    > ğŸ’¡ `ExamplePluginBuilder`, plugin iÃ§in bir *fluent API* gibidir. GerÃ§ek dÃ¼nyada retry policy, caching veya logging seviyeleri gibi daha geliÅŸmiÅŸ ayarlar sunabilir.

4. ### AdÄ±m 4: Pluginâ€™i Ergosfareâ€™e tanÄ±tÄ±n

    ArtÄ±k bir pluginimiz olduÄŸuna gÃ¶re, onu Ergosfareâ€™nin modÃ¼l sistemine kaydetmeliyiz.  

    Bunun standart yolu, `IModuleRegistry` Ã¼zerine bir **extension method** eklemektir. Bu, plugin kayÄ±tlarÄ±nÄ± temiz ve keÅŸfedilebilir hale getirir.

    ```csharp
    using Ergosfare.Core.Extensions.MicrosoftDependencyInjection;

    namespace Ergosfare.Examples.PluginExample;

    public static class ModuleRegistryExtensions
    {
        public static IModuleRegistry AddExamplePlugin(this IModuleRegistry registry, Action<ExamplePluginBuilder> builder)
        {
            return registry.Register(new ExamplePlugin(builder));
        }
    }
    ```

    > Bu extension method sayesinde, geliÅŸtiriciler plugininizi tÄ±pkÄ± yerleÅŸik Ergosfare modÃ¼lleri gibi tek satÄ±rla etkinleÅŸtirebilir.

5. ### AdÄ±m 5: Pluginâ€™i uygulamada kaydedin

    Son olarak, uygulama baÅŸlatÄ±lÄ±rken pluginimizi kaydediyoruz. Bu genelde `AddErgosfare` Ã§aÄŸrÄ±sÄ± iÃ§inde yapÄ±lÄ±r.

    ```csharp
    builder.Services.AddErgosfare(o =>
        o.AddExamplePlugin(plugin => plugin.SetupPlugin())
    );
    ```

    > ğŸ”— Bu yÃ¶ntemle plugin kullanÄ±mÄ± tutarlÄ± kalÄ±r: Command, Query, Event veya sizin Ã¶zel plugininiz fark etmeksizin, hepsi aynÄ± Ergosfare modÃ¼l kayÄ±t pipelineâ€™Ä±ndan geÃ§er.
{% /steps %}


## Sonraki AdÄ±mlar

{% cardgrid stagger=true %}
{% linkcard title="Command Handlerlar" href="/guides/commands/handlers" /%}
{% linkcard title="Query Handlerlar" href="/guides/queries/handlers" /%}
{% linkcard title="Event Handlerlar" href="/guides/events/handlers" /%}
{% linkcard title="Interceptorler" href="/guides/core-concepts/interceptors" /%}
{% /cardgrid %}
